# KEY SNIPPETS (for Chat Handoff) - 2025-09-24 02:21
head:200 / tail:120 / maxChars:40000

## pages/index.tsx  
- lines: 112 / sha256: 3E6C2532A5F73E6CB4E5F7E2BD506C9CB5224D5EC827F8F1F39C6210470116B0

````tsx
import React, { useMemo, useState } from "react";
import ProductCard from "../components/ProductCard";
import CartPanel from "../components/CartPanel";
import { LAYOUT } from "../lib/layout";
import { categories, products, type Product as ProductType } from "../data/catalog";
import { GLOW_THEME } from "../lib/theme";
type Item = { product: ProductType; qty: number };
const isUrl = (s?: string) => !!s && /^(https?:)?\/\//.test(s);

export default function HomePage() {
  const [selectedCategory, setSelectedCategory] = useState<string>(categories[0]?.id ?? "");
  const [items, setItems] = useState<Item[]>([]);
  const [selectedPay, setSelectedPay] = useState<string>("cash");

  const visibleProducts = useMemo(() => products.filter(p => p.categoryId === selectedCategory), [selectedCategory]);

  const onAdd = (p: ProductType) => {
    setItems((prev) => {
      const i = prev.findIndex((x) => x.product.id === p.id);
      if (i >= 0) { const copy = [...prev]; copy[i] = { ...copy[i], qty: copy[i].qty + 1 }; return copy; }
      return [...prev, { product: p, qty: 1 }];
    });
  };
  const onInc = (id: string) => setItems((prev) => prev.map((it) => (it.product.id === id ? { ...it, qty: it.qty + 1 } : it)));
  const onDec = (id: string) =>
  setItems((prev) => {
    const next = prev.map((it) => (it.product.id === id ? { ...it, qty: Math.max(0, it.qty - 1) } : it));
return next.filter((it) => it.qty > 0);
  });
  const onConfirm = () => { alert("æ±ºæ¸ˆç¢ºå®šï¼ˆ" + selectedPay + "ï¼‰"); setItems([]); };
  const getQty = (id: string) => items.find((it) => it.product.id === id)?.qty ?? 0;

  return (
    <div className="h-screen w-screen overflow-hidden" style={{ background: "var(--bg-app)" }}>
      <div
        className="flex h-full"
        style={{
          gap: LAYOUT.columnGapPx,
          paddingTop: LAYOUT.outerPaddingTopPx,
          paddingRight: LAYOUT.outerPaddingRightPx,
          paddingBottom: LAYOUT.outerPaddingBottomPx,
          paddingLeft: LAYOUT.outerPaddingLeftPx
        }}
      >
        {/* å·¦ï¼šã‚«ãƒ†ã‚´ãƒª */}
        <aside
          className="ios-section p-2 hidden sm:block relative z-10"
          role="radiogroup"
          aria-label="ã‚«ãƒ†ã‚´ãƒª"
          style={{ width: LAYOUT.leftColWidthPx }}
        >
          <div className="grid auto-rows-min place-items-center" style={{ gap: LAYOUT.categoryIconGapPx }}>
            {categories.map((c) => {
              const active = selectedCategory === c.id;
              return (
                <button
                  key={c.id}
                  type="button"
                  onClick={() => setSelectedCategory(c.id)}
                  className="flex flex-col items-center gap-1 ui-focus"
                  role="radio"
                  aria-checked={active}
                  aria-label={"ã‚«ãƒ†ã‚´ãƒª " + c.name}
                  style={{ fontSize: LAYOUT.categoryLabelPx }}
                >
                  <div
                    className={"btn-radio-icon cat-icon " + (active ? "glow-ring border-2 border-transparent" : "border border-transparent") + " transition-shadow"}
                    style={{ ["--glow-color" as any]: GLOW_THEME.category.color, ["--glow-ring-width" as any]: (GLOW_THEME.category.ringWidthPx ?? 2) + "px", ["--glow-blur" as any]: (GLOW_THEME.category.blurPx ?? 12) + "px",  width: LAYOUT.categoryIconPx, height: LAYOUT.categoryIconPx, display: "flex", alignItems: "center", justifyContent: "center" }}
                  >
                    {isUrl(c.icon)
                      ? <img src={c.icon!} alt={c.name} style={{
                          width: LAYOUT.categoryIconInnerImagePx, height: LAYOUT.categoryIconInnerImagePx,
                          transform: "translate(" + LAYOUT.categoryIconInnerOffsetXPx + "px," + LAYOUT.categoryIconInnerOffsetYPx + "px)"
                        }} />
                      : <span style={{
                          fontSize: LAYOUT.categoryIconInnerFontPx,
                          transform: "translate(" + LAYOUT.categoryIconInnerOffsetXPx + "px," + LAYOUT.categoryIconInnerOffsetYPx + "px)"
                        }}>{c.icon ?? c.name[0]}</span>
                    }
                  </div>
                  <div className="btn-radio-label" style={{ fontSize: LAYOUT.categoryLabelPx }}>{c.name}</div>
                </button>
              );
            })}
          </div>
        </aside>

        {/* ä¸­å¤®ï¼š1è¡Œãƒªã‚¹ãƒˆï¼ˆè¡Œå…¨ä½“ã‚¿ãƒƒãƒ—ã§è¿½åŠ ï¼‰ */}
        <main className="flex-1 overflow-auto relative z-0">
          <div className="flex flex-col pr-1" style={{ gap: LAYOUT.listRowGapPx }}>
            {visibleProducts.map((p) => (
              <ProductCard key={p.id} product={p} qty={getQty(p.id)} onAdd={onAdd} />
            ))}
          </div>
        </main>

        {/* å³ï¼šæ³¨æ–‡ */}
        <aside className="ios-section p-2 relative z-10" style={{ width: LAYOUT.rightColWidthPx }}>
          <CartPanel
            items={items}
            onInc={onInc}
            onDec={onDec}
            onConfirm={onConfirm}
            selectedPay={selectedPay}
            onChangePay={setSelectedPay}
          />
        </aside>
      </div>
    </div>
  );
}

````
## pages/_app.tsx  
- lines: 12 / sha256: 65ADBDC6FDE3B9262CFACC7AC2763F96CB979304F5C55E931C321771175A6586

````tsx
import type { AppProps } from "next/app";
import "../styles/globals.css";
import ThemeProvider from "../components/ThemeProvider";

export default function MyApp({ Component, pageProps }: AppProps) {
  return (
    <ThemeProvider theme={"light"}>
      <Component {...pageProps} />
    </ThemeProvider>
  );
}

````
## pages/_document.tsx  
- lines: 24 / sha256: FD9902AE6E04B4EB518F1BE01437396D1FA2B584795D1B0A1EA94BD913378573

````tsx
import { Html, Head, Main, NextScript } from "next/document";

export default function Document() {
  return (
    <Html lang="ja">
      <Head>
        <link rel="manifest" href="/manifest.webmanifest" />
        <meta name="theme-color" content="#000000" />
        {/* iOS: ãƒ›ãƒ¼ãƒ ç”»é¢è¿½åŠ ã§å…¨ç”»é¢ã«ã™ã‚‹ */}
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-title" content="Ticket" />
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
        <link rel="apple-touch-icon" sizes="180x180" href="/icons/icon-180.png" />
        {/* notchå¯¾ç­– */}
        <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
      </Head>
      <body>
        <Main />
        <NextScript />
      </body>
    </Html>
  );
}

````
## components/CartPanel.tsx  
- lines: 142 / sha256: 8624A9462033904185796D9959460C365CBAD3C4A3F8CB2202E762606130AFFB

````tsx
import React from "react";
import { LAYOUT, payVars, payGroupVars } from "../lib/layout";
import type { Product } from "../data/catalog";
import SlideToPay from "./SlideToPay";

type CartItem = { product: Product; qty: number };

type CartPanelProps = {
  items: CartItem[];
  onInc: (id: string) => void;
  onDec: (id: string) => void;
  onConfirm: () => void;
  selectedPay: string;
  onChangePay: (id: string) => void;
  paymentMethods?: { id: string; name: string; icon?: string }[];
};

const isUrl = (s?: string) => !!s && /^https?:\/\//.test(s);
const glyphFor = (id: string) => {
  switch(id.toLowerCase()){
    case "cash":   return "ç¾";
    case "card":   return "ã‚«";
    case "paypay": return "Q";
    default:       return "ãƒ»";
  }
};

export default function CartPanel({
  items,
  onInc,
  onDec,
  onConfirm,
  paymentMethods = [
    { id: "cash",   name: "ç¾é‡‘"  },
    { id: "card",   name: "ã‚«ãƒ¼ãƒ‰" },
    { id: "paypay", name: "PayPay"},
  ],
  selectedPay,
  onChangePay,
}: CartPanelProps) {
  const total = items.reduce((s, it) => s + it.product.price * it.qty, 0);

  return (
    <div className="h-full flex flex-col gap-3">
      {/* æ”¯æ‰•ã„æ–¹æ³•ï¼ˆç™ºå…‰ï¼‹èƒŒæ™¯ã‚¹ã‚­ãƒ³ï¼‰ */}
      <div
        className={"ios-section p-2 " + (selectedPay ? "glow-box" : "")}
        style={selectedPay ? ({
          ...(payVars(selectedPay) as any),
          ...(payGroupVars(selectedPay) as any),
          backgroundImage: "var(--group-bg-image)",
          backgroundRepeat: "no-repeat",
          backgroundSize: "var(--group-bg-size, cover)",
          backgroundPosition: "var(--group-bg-pos, center center)"
        } as any) : undefined}
      >
        <div className="flex items-center justify-between gap-2">
          <div className="flex items-center flex-wrap" role="radiogroup" aria-label="æ”¯æ‰•ã„æ–¹æ³•" style={{ gap: LAYOUT.paymentIconGapPx }}>
            {paymentMethods.map((m) => {
              const active = m.id === selectedPay;
              return (
                <button
                  key={m.id}
                  type="button"
                  onClick={(e) => { e.preventDefault(); e.stopPropagation(); onChangePay(m.id); }}
                  onMouseDown={(e) => { e.preventDefault(); e.stopPropagation(); }}
                  className="flex flex-col items-center gap-1 ui-focus"
                  role="radio"
                  aria-checked={active}
                >
                  <div
                    className={"btn-radio-icon " + (active ? "glow-ring border border-transparent" : "border") + " transition-shadow"}
                    style={{
                      ...(active ? (payVars(m.id) as any) : {}),
                      width: LAYOUT.payIconPx,
                      height: LAYOUT.payIconPx,
                      display: "flex",
                      alignItems: "center",
                      justifyContent: "center",
                      background: active ? "var(--pay-bg, var(--radio-bg))" : "var(--radio-bg)",
                      borderColor: undefined,
                    }}
                  >
                    {isUrl(m.icon)
                      ? <img src={m.icon!} alt={m.name} style={{ width: LAYOUT.payIconPx * 0.6, height: LAYOUT.payIconPx * 0.6, objectFit: "contain" }} />
                      : <span aria-hidden="true" style={{ fontSize: LAYOUT.payIconPx * 0.5, fontWeight: 700, lineHeight: 1 }}>{glyphFor(m.id)}</span>}
                  </div>
                  <div className="btn-radio-label" style={{ fontSize: LAYOUT.paymentLabelPx }}>{m.name}</div>
                </button>
              );
            })}
          </div>
        </div>
      </div>

      {/* ã‚«ãƒ¼ãƒˆå¤§ãƒ–ãƒ­ãƒƒã‚¯ï¼ˆå†…æœ«å°¾ã«åˆè¨ˆï¼‰ */}
      <div className="ios-section flex-1 overflow-auto flex flex-col">
        <div className="flex-1 overflow-auto">
          {items.length === 0 ? (
            <div className="p-3" style={{ color: "var(--text-muted)", fontSize: 12 }}>ã¾ã å•†å“ãŒã‚ã‚Šã¾ã›ã‚“</div>
          ) : (
            <ul>
              {items.map((it, idx) => (
                <li key={it.product.id} className={"px-3 py-2 " + (idx > 0 ? "ios-sep " : "") + "flex items-center gap-2"}>
                  <div className="flex-1 min-w-0">
                    <div className="truncate" style={{ fontSize: LAYOUT.cartItemNamePx }}>{it.product.name}</div>
                  </div>
                  <button
                    type="button"
                    onClick={() => onDec(it.product.id)}
                    className="btn-round-sm"
                    aria-label={it.product.name + " ã‚’1ã¤æ¸›ã‚‰ã™"}
                    style={{ width: LAYOUT.plusMinusPx, height: LAYOUT.plusMinusPx, fontSize: LAYOUT.plusMinusFontPx }}
                  >âˆ’</button>
                  <div className="text-center" style={{ width: LAYOUT.cartQtyWidthPx, fontSize: LAYOUT.cartQtyFontPx }}>{it.qty}</div>
                  <button
                    type="button"
                    onClick={() => onInc(it.product.id)}
                    className="btn-round-sm"
                    aria-label={it.product.name + " ã‚’1ã¤å¢—ã‚„ã™"}
                    style={{ width: LAYOUT.plusMinusPx, height: LAYOUT.plusMinusPx, fontSize: LAYOUT.plusMinusFontPx }}
                  >ï¼‹</button>
                </li>
              ))}
            </ul>
          )}
        </div>

        {/* åˆè¨ˆï¼ˆå¤§ãƒ–ãƒ­ãƒƒã‚¯ã®æœ€ä¸‹éƒ¨ï¼‰ */}
        <div className="ios-sep px-3 py-2 flex items-center justify-between">
          <span className="text-sm" style={{ fontSize: LAYOUT.totalsLabelPx, color: "var(--text-muted)" }}>åˆè¨ˆ</span>
          <span className="font-semibold" style={{ fontSize: LAYOUT.totalsValuePx }}>Â¥{total.toLocaleString()}</span>
        </div>
      </div>

      {/* ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ï¼ˆç‹¬ç«‹ãƒ–ãƒ­ãƒƒã‚¯ãƒ»æœ€ä¸‹æ®µï¼‰ */}
      <div className="ios-section px-3 py-3">
        <SlideToPay onConfirm={onConfirm} />
      </div>
    </div>
  );
}
````
## components/SlideToPay.tsx  
- lines: 163 / sha256: 41A2C2C7EA72317CE8241ECEC879EF76928997D188A765B133F3A9030408C990

````tsx
"use client";
import React, { useCallback, useEffect, useRef, useState } from "react";

export type SlideToPayProps = {
  onConfirm: () => void | Promise<void>;
  disabled?: boolean;
  thresholdPct?: number;    // æ—¢å®š 90
  heightPx?: number;        // æ—¢å®š 44
  knobPx?: number;          // æ—¢å®š 32
  label?: string;           // ãƒˆãƒ©ãƒƒã‚¯å†…ã®æ¡ˆå†…æ–‡
  confirmLabel?: string;    // ã—ãã„å€¤åˆ°é”æ™‚ã®æ¡ˆå†…æ–‡
  className?: string;       // è¿½åŠ ã®ã‚¯ãƒ©ã‚¹
  style?: React.CSSProperties;
  resetAfterConfirm?: boolean; // æ—¢å®š trueï¼ˆç™ºç«å¾Œã«0%ã¸æˆ»ã™ï¼‰
};

export const SlideToPay: React.FC<SlideToPayProps> = ({
  onConfirm,
  disabled = false,
  thresholdPct = 90,
  heightPx = 44,
  knobPx = 32,
  label = "ã‚¹ãƒ©ã‚¤ãƒ‰ã—ã¦æ±ºæ¸ˆ",
  confirmLabel = "é›¢ã—ã¦ç¢ºå®š",
  className = "",
  style,
  resetAfterConfirm = true,
}) => {
  const trackRef = useRef<HTMLDivElement>(null);
  const [trackW, setTrackW] = useState(0);
  const [pct, setPct] = useState(0);           // 0..100
  const pctRef = useRef(0);
  const dragging = useRef(false);

  const updatePct = (p: number) => { const v = Math.max(0, Math.min(100, p)); pctRef.current = v; setPct(v); };

  // ãƒˆãƒ©ãƒƒã‚¯å¹…ã‚’ç›£è¦–ï¼ˆãƒãƒ–ä½ç½®/å¡—ã‚Šå¹…ã®ç®—å‡ºã«ä½¿ç”¨ï¼‰
  useEffect(() => {
    const el = trackRef.current;
    if (!el) return;
    const ro = new ResizeObserver(() => setTrackW(el.clientWidth));
    setTrackW(el.clientWidth);
    ro.observe(el);
    return () => ro.disconnect();
  }, []);

  const effectiveWidth = Math.max(0, trackW - knobPx);     // ãƒãƒ–ãŒã¯ã¿å‡ºã•ãªã„å¯å‹•åŸŸ
  const knobLeftPx = Math.round((pct / 100) * effectiveWidth);
  const fillWidthPx = Math.max(0, knobLeftPx + knobPx);

  const toPctFromClientX = (clientX: number) => {
    const el = trackRef.current;
    if (!el) return pctRef.current;
    const rect = el.getBoundingClientRect();
    const x = clientX - rect.left - knobPx / 2;            // ãƒãƒ–ä¸­å¿ƒåŸºæº–
    const ratio = x / Math.max(1, rect.width - knobPx);
    return Math.max(0, Math.min(1, ratio)) * 100;
  };

  const endDrag = useCallback(async () => {
    if (!dragging.current) return;
    dragging.current = false;
    const finalPct = pctRef.current;
    if (finalPct >= thresholdPct && !disabled) {
      updatePct(100);
      try { await onConfirm(); } finally {
        if (resetAfterConfirm) updatePct(0);
      }
    } else {
      // ã—ãã„å€¤æœªæº€ã¯æˆ»ã™
      updatePct(0);
    }
  }, [onConfirm, thresholdPct, disabled, resetAfterConfirm]);

  const onPointerDown = (e: React.PointerEvent) => {
   e.preventDefault();  e.preventDefault(); if (disabled) return;
    (e.currentTarget as HTMLElement).setPointerCapture?.(e.pointerId);
    dragging.current = true;
    updatePct(toPctFromClientX(e.clientX));
  };
  const onPointerMove = (e: React.PointerEvent) => {
    e.preventDefault(); if (!dragging.current || disabled) return;
    updatePct(toPctFromClientX(e.clientX));
  };
  const onPointerUp = () => endDrag();

  const onKeyDown = (e: React.KeyboardEvent) => {
    if (disabled) return;
    if (e.key === "ArrowRight") { e.preventDefault(); updatePct(pctRef.current + 5); }
    if (e.key === "ArrowLeft")  { e.preventDefault(); updatePct(pctRef.current - 5); }
    if (e.key === "Home")       { e.preventDefault(); updatePct(0); }
    if (e.key === "End")        { e.preventDefault(); updatePct(100); }
    if (e.key === "Enter" || e.key === " ") {
      e.preventDefault();
      if (pctRef.current >= thresholdPct) { endDrag(); } else { updatePct(thresholdPct); }
    }
  };

  const reached = pct >= thresholdPct;
  const ariaNow = Math.round(pct);

  return (
    <div
      ref={trackRef}
      className={
        "relative rounded-full select-none shadow-sm ios-section " +
        (disabled ? "opacity-60 pointer-events-none " : "ui-focus cursor-pointer ") +
        className
      }
      style={{
        height: heightPx,
        background: "var(--slider-track)",
        touchAction: "none",
        ...style,
      }}
      role="slider"
      aria-valuemin={0}
      aria-valuemax={100}
      aria-valuenow={ariaNow}
      aria-disabled={disabled || undefined}
      tabIndex={disabled ? -1 : 0}
      onPointerDown={onPointerDown}
      onPointerMove={onPointerMove}
      onPointerUp={onPointerUp}
      onPointerCancel={onPointerUp}
      onKeyDown={onKeyDown}
    >
      {/* å¡—ã‚Šï¼ˆé€²æ—ï¼‰ */}
      <div
        className="absolute left-0 top-0 h-full rounded-full"
        style={{
          width: fillWidthPx,
          background: "var(--slider-fill)",
          transition: dragging.current ? "none" : "width .15s ease",
        }}
      />
      {/* ãƒãƒ– */}
      <div
        className={"absolute top-1/2 rounded-full border " + (reached ? "glow-ring border-2" : "")}
        style={{
          left: knobLeftPx,
          width: knobPx,
          height: knobPx,
          transform: "translateY(-50%)",
          background: "linear-gradient(180deg, var(--knob-start), var(--knob-end))",
          borderColor: "var(--border)",
          boxShadow: "var(--shadow-sm)",
          transition: dragging.current ? "none" : "left .15s ease",
          // ç™ºå…‰ã®è‰²ï¼ˆæ—¢å®šã¯ --accentã€‚paymentGlow ã‚’ä½¿ã†å ´åˆã¯å¤–ã‹ã‚‰ --glow-color ã‚’ä¸Šæ›¸ãå¯èƒ½ï¼‰
          ["--glow-color" as any]: "var(--accent)",
        }}
      />
      {/* ãƒ©ãƒ™ãƒ« */}
      <div className="absolute inset-0 grid place-items-center pointer-events-none">
        <span className="text-[13px] text-[color:var(--chip-text)]">
          {reached ? confirmLabel : label}
        </span>
      </div>
    </div>
  );
};

export default SlideToPay;
````
## components/ProductCard.tsx  
- lines: 98 / sha256: AFC989FC26F13FE705FB26129FD08B9B5A7AC817FA016BFA65F3465F023DCDFF

````tsx
import React from "react";
import { type Product } from "../data/catalog";
import { LAYOUT } from "../lib/layout";
import { qtyActiveVars } from "../lib/theme";

type ProductCardProps = {
  product: Product;
  qty?: number;
  onAdd: (p: Product) => void;
};

export default function ProductCard({ product, qty = 0, onAdd }: ProductCardProps) {
  const onActivate = () => onAdd(product);
  const onKeyDown: React.KeyboardEventHandler<HTMLButtonElement> = (e) => {
    if (e.currentTarget !== document.activeElement) return;
    if (e.key === "Enter" || e.key === " ") { e.preventDefault(); onAdd(product); }
  };

  return (
    <button
      data-role="product-card"
      type="button"
      onClick={onActivate}
      onKeyDown={onKeyDown}
      className="row-card ui-tap ui-focus" style={{ position: "relative" }}
      aria-label={product.name + " ã‚’è¿½åŠ "}
    >
      <div className="flex items-center gap-3">
        {product.imageUrl ? (
          // eslint-disable-next-line @next/next/no-img-element
          <img
            src={product.imageUrl}
            alt={product.name}
            className="rounded-xl object-cover"
            style={{ width: LAYOUT.productImagePx, height: LAYOUT.productImagePx, border: "1px solid var(--border)" }}
          />
        ) : (
          <div
            className="rounded-xl"
            style={{ width: LAYOUT.productImagePx, height: LAYOUT.productImagePx, background: "var(--surface-elev)", border: "1px solid var(--border)" }}
          />
        )}

        <div className="flex-1 min-w-0">
          <div
            className="truncate font-semibold leading-tight"
            style={{ fontSize: LAYOUT.productNamePx, transform: "translate(" + LAYOUT.productNameOffsetXPx + "px," + LAYOUT.productNameOffsetYPx + "px)" }}
          >
            {product.name}
          </div>
          <div
            className="leading-tight"
            style={{
              fontSize: LAYOUT.productPricePx,
              color: "var(--text-muted)",
              transform: "translate(" + LAYOUT.productPriceOffsetXPx + "px," + LAYOUT.productPriceOffsetYPx + "px)"
            }}
          >
            Â¥{product.price.toLocaleString()}
          </div>
          {product.allergy?.length ? (
            <div
              className="flex flex-wrap gap-1 mt-1"
              style={{ transform: "translate(" + LAYOUT.allergyOffsetXPx + "px," + LAYOUT.allergyOffsetYPx + "px)" }}
            >
              {product.allergy.slice(0, 8).map((al) => (
                <span key={al} className="ios-chip" style={{ fontSize: LAYOUT.allergyChipFontPx }}>{al}</span>
              ))}
            </div>
          ) : null}
        </div>

        <div className="shrink-0" style={{ position: "absolute", top: LAYOUT.qtyBadgeOffsetTopPx, right: LAYOUT.qtyBadgeOffsetRightPx, zIndex: LAYOUT.qtyBadgeZIndex, pointerEvents: "none" }}>
          <div 
            className="flex items-center justify-center qty-badge"
            style={{ ...qtyActiveVars(), 
              color: "var(--badge-text)",
              minWidth: LAYOUT.qtyBadgeMinWidthPx,
              height: LAYOUT.qtyBadgeHeightPx,
              paddingInline: LAYOUT.qtyBadgePaddingInlinePx,
              fontSize: LAYOUT.qtyTextPx,
              border: "1px solid var(--border)",
              boxShadow: "var(--shadow-sm)",
              // å››éš…ã®è§’ä¸¸ã‚’å€‹åˆ¥æŒ‡å®š
              borderTopLeftRadius: LAYOUT.qtyBadgeRadiusTopLeftPx,
              borderTopRightRadius: LAYOUT.qtyBadgeRadiusTopRightPx,
              borderBottomRightRadius: LAYOUT.qtyBadgeRadiusBottomRightPx,
              borderBottomLeftRadius: LAYOUT.qtyBadgeRadiusBottomLeftPx,
            }}
           data-qty={qty}>{qty}</div>
        </div>
      </div>
    </button>
  );
}



````
## components/CategoryDock.tsx  
- lines: 30 / sha256: 96DD88D1CAC98782BECB39DCD6AEE72B8DDBE4D9E5D72B11281EE19A319DBEBF

````tsx
"use client";
import React from "react";
import { motion } from "framer-motion";
import useSfxHowler from "../hooks/useSfxHowler";

export type Category = { id: number; name: string; emoji: string };

export default function CategoryDock({ categories, selectedId, onSelect }: {
  categories: Category[]; selectedId: number | null; onSelect: (id: number) => void;
}) {
  const { unlock, playKey } = useSfxHowler();

  return (
    <div className="sticky top-4 flex flex-col items-center gap-4">
      {categories.map((c) => {
        const active = selectedId === c.id;
        return (
          <motion.button key={c.id} layoutId={`cat-${c.id}`} type="button"
            onClick={() => { unlock(); playKey(); onSelect(c.id); }} whileHover={{ scale: 1.06 }} whileTap={{ scale: 0.96 }}
            className={`w-20 h-20 rounded-full flex items-center justify-center border text-3xl shadow ${
              active ? "bg-blue-500 text-white border-blue-600 ring-2 ring-blue-300"
                     : "bg-white text-black border-gray-300 hover:bg-gray-50"}`} title={c.name}>
            <span aria-hidden>{c.emoji}</span>
          </motion.button>
        );
      })}
    </div>
  );
}

````
## components/TopBar.tsx  
- lines: 36 / sha256: 04F440BF52BA1265E1DA8543881A1F23CF6C113863B81E9FED020283D45FF423

````tsx
"use client";
import React from "react";
import { motion } from "framer-motion";
import useSfxHowler from "../hooks/useSfxHowler";

export type Payment = "CARD" | "QR" | "CASH";
export const methods: Payment[] = ["CARD", "QR", "CASH"];
const icons: Record<Payment, string> = { CARD: "ğŸ’³", QR: "ğŸ“±", CASH: "ğŸ’´" };
const labels: Record<Payment, string> = { CARD: "ã‚«ãƒ¼ãƒ‰", QR: "QR", CASH: "ç¾é‡‘" };
const SPRING = { type: "spring", mass: 0.6, stiffness: 320, damping: 24, restDelta: 0.001 };

export default function TopBar({ payment, onChange }: { payment: Payment | null; onChange: (p: Payment) => void; }) {
  if (payment === null) return null;
  const { unlock, playKey } = useSfxHowler();

  return (
    <div className="w-full px-2 pb-2 flex items-center gap-4">
      <div className="flex items-center gap-3">
        {methods.map((m) => (
          <motion.button key={m} layoutId={`pay-${m}`} transition={SPRING} whileHover={{ scale: 1.06 }} whileTap={{ scale: 0.96 }}
            type="button" onClick={() => { unlock(); playKey(); onChange(m); }} aria-pressed={payment === m} title={m}
            className={`w-16 h-16 rounded-full flex items-center justify-center border text-2xl transition-colors ${
              payment === m ? "bg-yellow-400 text-black border-yellow-500 ring-2 ring-yellow-300"
                             : "bg-white text-black border-gray-300 hover:bg-gray-50"}`}>
            {icons[m]}
          </motion.button>
        ))}
      </div>
      <div className="pl-2 text-gray-900 text-base">
        <span className="opacity-80">ç¾åœ¨ã®æ”¯æ‰•ã„æ–¹æ³•ï¼š</span>
        <span className="font-semibold">{labels[payment]}</span>
      </div>
    </div>
  );
}

````
## components/FullscreenToggle.tsx  
- lines: 14 / sha256: D055C072D81AA5FDA27673E427779021CA49960E72FE2906A0B1E1E0FA7FB5CF

````tsx
export default function FullscreenToggle() {
  async function go() {
    const el = document.documentElement as any;
    if (el.requestFullscreen) await el.requestFullscreen();
    // å¯èƒ½ãªã‚‰æ¨ªå‘ãã«ãƒ­ãƒƒã‚¯ï¼ˆå¯¾å¿œç«¯æœ«ã®ã¿ï¼‰
    try { await (screen as any).orientation?.lock?.("landscape"); } catch {}
  }
  return (
    <button onClick={go} className="px-4 py-2 rounded-xl border">
      å…¨ç”»é¢è¡¨ç¤ºã«ã™ã‚‹
    </button>
  );
}

````
## lib/layout.ts  
- lines: 167 / sha256: EC2AE99BB425125A1FA1BDD94B17D9949EDBA3A2A43C580F44ABD92048AD91ED

````ts
/**
 * ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆæ•°å€¤ã®ä¸€å…ƒç®¡ç†ï¼ˆUI å…¨ä½“ã§å‚ç…§ï¼‰
 * ä½ç½®èª¿æ•´ã¯ transform: translate(X, Y) ã§é©ç”¨
 */
export const LAYOUT = {
  /* === ãƒ•ãƒ¬ãƒ¼ãƒ ï¼ˆç”»é¢ã®æœ€å¤–ä½™ç™½ 4è¾ºï¼‰=== */
  outerPaddingTopPx:    20,  // pages/index.tsx â€¦â€¦ ç”»é¢æœ€å¤–ã®ä¸Šä½™ç™½
  outerPaddingRightPx:  1,   // å³ä½™ç™½
  outerPaddingBottomPx: 1,   // ä¸‹ä½™ç™½
  outerPaddingLeftPx:   1,   // å·¦ä½™ç™½
  columnGapPx:          1,   // å·¦ãƒ»ä¸­å¤®ãƒ»å³ã‚«ãƒ©ãƒ é–“ã®éš™é–“

  /* === ã‚«ãƒ©ãƒ å¹… === */
  leftColWidthPx:   80,      // å·¦ã‚«ãƒ©ãƒ ï¼ˆã‚«ãƒ†ã‚´ãƒªï¼‰
  rightColWidthPx:  300,     // å³ã‚«ãƒ©ãƒ ï¼ˆæ³¨æ–‡ï¼‰

  /* === ã‚«ãƒ†ã‚´ãƒªï¼ˆå·¦ã‚«ãƒ©ãƒ ï¼‰ === */
  categoryIconPx:           60, // ä¸¸ã‚¢ã‚¤ã‚³ãƒ³ç›´å¾„
  categoryIconGapPx:        12, // ã‚¢ã‚¤ã‚³ãƒ³é–“éš”
  categoryLabelPx:          13, // ãƒ©ãƒ™ãƒ«æ–‡å­—ã‚µã‚¤ã‚º
  // ã‚¢ã‚¤ã‚³ãƒ³å†…ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ï¼ˆç”»åƒ/çµµæ–‡å­—/æ–‡å­—ï¼‰ã®å¤§ãã•ãƒ»ä½ç½®
  categoryIconInnerFontPx:  34, // çµµæ–‡å­—/æ–‡å­—ã®ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚º
  categoryIconInnerImagePx: 36, // ç”»åƒã‚’ä½¿ã†å ´åˆã®å†…å´ç”»åƒã‚µã‚¤ã‚º
  categoryIconInnerOffsetXPx: 0, // å†…å´ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã® X æ–¹å‘ã‚ªãƒ•ã‚»ãƒƒãƒˆ
  categoryIconInnerOffsetYPx: 0, // å†…å´ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã® Y æ–¹å‘ã‚ªãƒ•ã‚»ãƒƒãƒˆ

  /* === ä¸­å¤®ãƒªã‚¹ãƒˆ === */
  listRowGapPx:        1,    // 1è¡Œã”ã¨ã®é–“éš”
  productNamePx:      18,    // å•†å“å æ–‡å­—ã‚µã‚¤ã‚º
  productPricePx:     18,    // ä¾¡æ ¼ æ–‡å­—ã‚µã‚¤ã‚º
  allergyChipFontPx:  14,    // ã‚¢ãƒ¬ãƒ«ã‚®ãƒ¼ã‚¿ã‚° æ–‡å­—ã‚µã‚¤ã‚º
  productImagePx:    100,    // å•†å“ç”»åƒã®ç¸¦æ¨ª

  // ä¸­å¤®ãƒªã‚¹ãƒˆå†…ã®å„è¡¨ç¤ºä½ç½®ï¼ˆpx å˜ä½ã®ã‚ªãƒ•ã‚»ãƒƒãƒˆï¼‰
  productNameOffsetXPx:   0,
  productNameOffsetYPx:   -5,
  productPriceOffsetXPx:  0,
  productPriceOffsetYPx:  3,
  allergyOffsetXPx:       0,
  allergyOffsetYPx:       9,

  /* === æ•°é‡ãƒãƒƒã‚¸ï¼ˆä¸­å¤®ãƒªã‚¹ãƒˆå³ç«¯ï¼‰ === */
  qtyBadgeMinWidthPx: 60,
  qtyBadgeHeightPx: 118,
  qtyTextPx: 30,

  qtyBadgeOffsetTopPx: -1,
  qtyBadgeOffsetRightPx: 0,
  qtyBadgeZIndex: 2,

  qtyBadgePaddingInlinePx: 0,
  qtyBadgeOverflowRightPx: 0,

  // è§’ä¸¸ï¼ˆæ•°é‡ãƒãƒƒã‚¸ï¼‰
  qtyBadgeRadiusTopLeftPx: 0,
  qtyBadgeRadiusTopRightPx: 15,
  qtyBadgeRadiusBottomRightPx: 15,
  qtyBadgeRadiusBottomLeftPx: 0,

/* === æ”¯æ‰•ã„æ–¹æ³•ï¼ˆå³ã‚«ãƒ©ãƒ ä¸Šéƒ¨ï¼‰ === */
  payIconPx:           45,   // ä¸¸ã‚¢ã‚¤ã‚³ãƒ³ç›´å¾„
  paymentIconGapPx:     7,   // ã‚¢ã‚¤ã‚³ãƒ³é–“éš”
  paymentLabelPx:      12,   // ãƒ©ãƒ™ãƒ«æ–‡å­—ã‚µã‚¤ã‚º
  selectedLabelPx:     15,   // ã€Œé¸æŠä¸­ã€è¡¨ç¤ºã®æ–‡å­—
  // ã‚¢ã‚¤ã‚³ãƒ³å†…ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ï¼ˆç”»åƒ/çµµæ–‡å­—/æ–‡å­—ï¼‰ã®å¤§ãã•ãƒ»ä½ç½®
  payIconInnerFontPx:  24,   // çµµæ–‡å­—/æ–‡å­—ã®ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚º
  payIconInnerImagePx: 26,   // ç”»åƒã®å ´åˆã®ã‚µã‚¤ã‚º
  payIconInnerOffsetXPx: 0,  // X æ–¹å‘ã‚ªãƒ•ã‚»ãƒƒãƒˆ
  payIconInnerOffsetYPx: 0,  // Y æ–¹å‘ã‚ªãƒ•ã‚»ãƒƒãƒˆ

  /* === æ³¨æ–‡ãƒªã‚¹ãƒˆï¼ˆå³ã‚«ãƒ©ãƒ ä¸­éƒ¨ï¼‰ === */
  cartItemNamePx:   17,      // æ³¨æ–‡å æ–‡å­—ã‚µã‚¤ã‚º
  cartItemPricePx:  15,      // å˜ä¾¡ æ–‡å­—ã‚µã‚¤ã‚º
  plusMinusPx:      24,      // Â±ãƒœã‚¿ãƒ³å¾„
  plusMinusFontPx:  14,      // Â±ã‚¢ã‚¤ã‚³ãƒ³æ–‡å­—ã‚µã‚¤ã‚º
  cartQtyWidthPx:   22,      // Â±ã®é–“ã®æ•°é‡è¡¨ç¤ºã®å¹…
  cartQtyFontPx:    21,      // Â±ã®é–“ã®æ•°é‡æ–‡å­—ã‚µã‚¤ã‚º

  /* === åˆè¨ˆè¡Œï¼ˆå³ã‚«ãƒ©ãƒ ä¸‹éƒ¨ï¼‰ === */
  totalsLabelPx:    18,
  totalsValuePx:    18,

  /* === ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ï¼ˆæ±ºæ¸ˆï¼‰ === */
  slideKnobPx:        42,    // ãƒãƒ–ç›´å¾„
  slideConfirmAt:     0.90,  // ç¢ºå®šé–¾å€¤ï¼ˆ0..1ï¼‰
  slideInsetStartPx:  1,     // å·¦ç«¯ã‹ã‚‰ã®é–‹å§‹ã‚¤ãƒ³ã‚»ãƒƒãƒˆ
  slideInsetEndPx:    6,     // å³ç«¯ã‹ã‚‰ã®çµ‚äº†ã‚¤ãƒ³ã‚»ãƒƒãƒˆ
  slideLabelPx:       16,    // ãƒ©ãƒ™ãƒ«æ–‡å­—ã‚µã‚¤ã‚º
} as const;



//
// === payment highlight (tint & glow) ===
export const PAY_HL = {
  ringWidthPx: 2,
  blurPx: 12,
  default: { color: 'rgba(56,189,248,.85)', bg: 'rgba(56,189,248,.10)' },
  byKey: {
    cash:   { color: 'rgba(245,158,11,.90)', bg: 'rgba(245,158,11,.12)' },
    card:   { color: 'rgba(34,197,94,.90)',  bg: 'rgba(34,197,94,.12)'  },
    paypay: { color: 'rgba(239,68,68,.90)',  bg: 'rgba(239,68,68,.12)'  },
  }
} as const;

export const payVars = (key?: string) => {
  const k = (key ?? '').toLowerCase();
  const spec = (PAY_HL as any).byKey?.[k] ?? (PAY_HL as any).default;
  return {
    ['--glow-color' as any]: spec.color,
    ['--glow-ring-width' as any]: ((PAY_HL as any).ringWidthPx ?? 2) + 'px',
    ['--glow-blur' as any]: ((PAY_HL as any).blurPx ?? 12) + 'px',
    ['--pay-bg' as any]: spec.bg ?? 'transparent',
  } as any;
};

/** â”€â”€ payment group (è¦ªãƒ–ãƒ­ãƒƒã‚¯) ã®èƒŒæ™¯ã‚¹ã‚­ãƒ³è¨­å®š â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
export type PaySkinSpec = {
  groupBgImage?: string;   // ç”»åƒãƒ‘ã‚¹ï¼ˆ/public é…ä¸‹ï¼‰
  groupBgSize?: string;    // CSS background-size å€¤
  groupBgPos?: string;     // CSS background-position å€¤
};
export const PAY_SKIN: { default: PaySkinSpec; byKey: Record<string, PaySkinSpec> } = {
  // æ—¢å®šï¼ˆå¼±ã‚ã«å³å´ã¸ï¼‰
  default: { groupBgImage: "/icons/icon-192.png", groupBgSize: "auto 72%", groupBgPos: "right 12px center" },
  byKey: {
    cash:   { groupBgImage: "/icons/icon-180.png", groupBgSize: "auto 78%", groupBgPos: "right 12px center" },
    card:   { groupBgImage: "/icons/icon-192.png" },
    paypay: { groupBgImage: "/icons/icon-512.png", groupBgSize: "auto 70%" },
  }
};
/** è¦ªãƒ–ãƒ­ãƒƒã‚¯ç”¨ã® CSS å¤‰æ•°ï¼ˆèƒŒæ™¯ç”»åƒãªã©ï¼‰ã‚’è¿”ã™ */
export const payGroupVars = (key?: string): Record<string,string> => {
  const k = (key ?? "").toLowerCase();
  const spec = (k && PAY_SKIN.byKey[k]) || PAY_SKIN.default;
  const out: any = {};
  if (spec.groupBgImage) out["--group-bg-image"] = `url('${spec.groupBgImage}')`;
  if (spec.groupBgSize)  out["--group-bg-size"]  = spec.groupBgSize!;
  if (spec.groupBgPos)   out["--group-bg-pos"]   = spec.groupBgPos!;
  return out as Record<string,string>;
};
\n// --- handoff shim begin (safe to remove when real impl exists) ---
export type PayVarsInput = Partial<{
  tone: string;
  active: boolean;
  emphasis: number;
  skin: string;
}>;

export function payVars(input: PayVarsInput = {}): Record<string,string> {
  const tone = input.tone ?? "default";
  const active = input.active ?? true;
  const emphasis = input.emphasis ?? 0.6;
  const skin = input.skin ?? "solid";
  return {
    "--pay-bg":   `var(--pay-${tone}-bg, rgba(34,197,94,${active ? 0.18 : 0.08}))`,
    "--pay-ring": `var(--pay-${tone}-ring, rgba(34,197,94,${active ? 0.70 : 0.35}))`,
    "--pay-emphasis": String(emphasis),
    "--pay-skin": skin,
  };
}

export function payGroupVars(group: string | number, input: PayVarsInput = {}): Record<string,string> {
  return { ...payVars(input), "--pay-group-id": String(group) };
}
// --- handoff shim end ---

````
## lib/theme.ts  
- lines: 246 / sha256: 2F28A8CBD255130E09B101BEAA148E9B158FC7430F2ADE93E24D3BFAF8036E57

````ts
/**
 * lib/theme.ts
 * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 * ã€Œè‰²ãƒ»èƒŒæ™¯ãƒ»å½±ãƒ»æ–‡å­—è‰²ã€ã‚’ä¸€æ‹¬ç®¡ç†ã—ã€CSS å¤‰æ•°ã¨ã—ã¦ :root ã«é©ç”¨ã—ã¾ã™ã€‚
 * å¤‰æ›´ã®ä»•æ–¹ï¼š
 *   1) THEME_LIGHT.colors ã®å€¤ã‚’å¤‰ãˆã‚‹   â†’ ã™ã UI ã«åæ˜ ï¼ˆThemeProvider çµŒç”±ï¼‰
 *   2) å¿…è¦ãªã‚‰ THEME_DARK ã‚‚ç”¨æ„ã—ã¦ã€<ThemeProvider theme="dark"> ã§åˆ‡æ›¿
 *   3) ã•ã‚‰ã«ç´°ã‹ãå¤‰ãˆãŸã„å ´åˆã¯ã€applyTheme() ã® CSS å¤‰æ•°å‰²å½“ã‚’å¢—ã‚„ã™
 *
 * ã©ã“ã«åŠ¹ãï¼Ÿ
 *   - Body èƒŒæ™¯è‰²              : appBg â†’ --bg-appï¼ˆglobals.css ã® body èƒŒæ™¯ï¼‰
 *   - åŸºæœ¬æ–‡å­—è‰²/ã‚µãƒ–æ–‡å­—è‰²    : text / textMuted â†’ --text / --text-muted
 *   - é¢ã®è‰²/å¢ƒç•Œ/å½±           : surface / border / shadows â†’ .ios-section / .row-card / .btn-round-sm ãªã©
 *   - Chip                     : chipBg / chipBorder / chipText â†’ .ios-chip
 *   - ãƒ©ã‚¸ã‚ªé¢¨ä¸¸ï¼ˆã‚«ãƒ†ã‚´ãƒª/æ±ºæ¸ˆï¼‰: radioBg / radioActive â†’ .btn-radio-icon / .btn-radio-active
 *   - å°ãƒœã‚¿ãƒ³ï¼ˆÂ±ãªã©ï¼‰        : buttonBg / buttonBorder / buttonText â†’ .btn-round-sm
 *   - å€‹æ•°ãƒãƒƒã‚¸               : badgeBg / badgeText â†’ ProductCard ã®æ•°é‡è¡¨ç¤º
 *   - ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼               : sliderTrack / sliderFill / knobStart / knobEnd â†’ SlideToConfirm
 *   - ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒãƒ¼           : scrollbarThumb â†’ ã™ã¹ã¦ã®ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒãƒ¼
 */

export type Theme = {
  name: string;

  /** è‰²ç³»ï¼ˆï¼CSSå¤‰æ•°ã«ãƒãƒƒãƒ—ã•ã‚Œ UI å„æ‰€ã§å‚ç…§ï¼‰ */
  colors: {
    appBg: string;        // Body èƒŒæ™¯ï¼ˆ--bg-appï¼‰: ç”»é¢å…¨ä½“ã®åœ°è‰²

    text: string;         // é€šå¸¸ã®æ–‡å­—è‰²ï¼ˆ--textï¼‰
    textMuted: string;    // è£œåŠ©ãƒ†ã‚­ã‚¹ãƒˆï¼ˆ--text-mutedï¼‰: ä¾¡æ ¼ãƒ»ã‚µãƒ–æƒ…å ±ãƒ»ãƒ©ãƒ™ãƒ«ãªã©

    surface: string;          // é¢ã®åœ°è‰²ï¼ˆ--surfaceï¼‰: .ios-section / .row-card / å°ãƒœã‚¿ãƒ³ã®ãƒ™ãƒ¼ã‚¹
    surfaceElevated: string;  // ã‚„ã‚„æŒã¡ä¸ŠãŒã£ãŸé¢ï¼ˆ--surface-elevï¼‰: ç”»åƒãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ã€ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ãƒˆãƒ©ãƒƒã‚¯ã®ã‚°ãƒ©ãƒ‡ç­‰
    border: string;           // æ ç·šï¼ˆ--borderï¼‰: é¢/ä¸¸/ãƒœã‚¿ãƒ³/åŒºåˆ‡ã‚Šç·šã®å¢ƒç•Œè‰²

    chipBg: string;       // ãƒãƒƒãƒ—èƒŒæ™¯ï¼ˆ--chip-bgï¼‰: ã‚¢ãƒ¬ãƒ«ã‚®ãƒ¼ã‚¿ã‚°ç­‰
    chipBorder: string;   // ãƒãƒƒãƒ—æ ç·šï¼ˆ--chip-borderï¼‰
    chipText?: string;    // ãƒãƒƒãƒ—æ–‡å­—ï¼ˆ--chip-textï¼‰: æœªæŒ‡å®šãªã‚‰ --text-muted ã‚’ä½¿ç”¨

    radioBg: string;      // ä¸¸ã‚¢ã‚¤ã‚³ãƒ³ã®åœ°ï¼ˆ--radio-bgï¼‰: ã‚«ãƒ†ã‚´ãƒª/æ”¯æ‰•ã„ã‚¢ã‚¤ã‚³ãƒ³ã®å†…å´
    radioActive: string;  // ã‚¢ã‚¯ãƒ†ã‚£ãƒ–è£…é£¾ï¼ˆ--accentï¼‰: é¸æŠãƒªãƒ³ã‚°ã‚„ focus ãƒªãƒ³ã‚°

    buttonBg: string;     // å°ãƒœã‚¿ãƒ³èƒŒæ™¯ï¼ˆ--btn-bgï¼‰: Â±ãƒœã‚¿ãƒ³ãªã©
    buttonBorder: string; // å°ãƒœã‚¿ãƒ³æ ç·šï¼ˆ--btn-borderï¼‰
    buttonText?: string;  // å°ãƒœã‚¿ãƒ³æ–‡å­—ï¼ˆ--btn-textï¼‰

    badgeBg: string;      // æ•°é‡ãƒãƒƒã‚¸èƒŒæ™¯ï¼ˆ--badge-bgï¼‰
    badgeText?: string;   // æ•°é‡ãƒãƒƒã‚¸æ–‡å­—ï¼ˆ--badge-textï¼‰

    sliderTrack: string;  // ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ãƒˆãƒ©ãƒƒã‚¯ã®è–„ã„å¡—ã‚Šï¼ˆ--slider-trackï¼‰
    sliderFill: string;   // ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ãƒ•ã‚£ãƒ«ï¼ˆ--slider-fillï¼‰
    knobStart: string;    // ãƒãƒ–ä¸Šå´ã‚°ãƒ©ãƒ‡èµ·ç‚¹ï¼ˆ--knob-startï¼‰
    knobEnd: string;      // ãƒãƒ–ä¸‹å´ã‚°ãƒ©ãƒ‡çµ‚ç‚¹ï¼ˆ--knob-endï¼‰

    scrollbarThumb: string; // ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒãƒ¼ã¤ã¾ã¿ï¼ˆ--scrollbar-thumbï¼‰
  };

  /** å½±ç³»ï¼ˆï¼CSSå¤‰æ•°ã«ãƒãƒƒãƒ—ã•ã‚Œ UI å„æ‰€ã§å‚ç…§ï¼‰ */
  shadows: {
    sm: string;           // --shadow-sm : é¢ã‚„ãƒœã‚¿ãƒ³ã®åŸºæœ¬ã‚·ãƒ£ãƒ‰ã‚¦
    lg: string;           // --shadow-lg : å¤§ãã‚ã®æŒã¡ä¸Šã’ï¼ˆã‚«ãƒ¼ãƒ‰ç­‰ï¼‰
  };
};

/** ãƒ©ã‚¤ãƒˆãƒ†ãƒ¼ãƒï¼ˆæ—¢å®šï¼‰: iOS ãƒ©ã‚¤ã‚¯ãªæ¸…æ½”æ„Ÿ */
export const THEME_LIGHT: Theme = {
  name: "light",
  colors: {
    appBg: "#f5f5f7",            // Body èƒŒæ™¯

    text: "#111827",             // æ–‡å­—ï¼ˆæ¿ƒã„ã‚°ãƒ¬ãƒ¼ï¼‰
    textMuted: "#6b7280",        // è£œåŠ©æ–‡å­—ï¼ˆè–„ã„ã‚°ãƒ¬ãƒ¼ï¼‰

    surface: "#ffffff",          // é¢ï¼ˆç™½ï¼‰
    surfaceElevated: "#f3f4f6",  // ã‚„ã‚„æŒã¡ä¸Šã’é¢ï¼ˆè–„ã‚°ãƒ¬ãƒ¼ï¼‰
    border: "rgba(0,0,0,0.08)",  // æ ç·šï¼ˆã”ãè–„ã„é»’ï¼‰

    chipBg: "#f3f4f6",           // ãƒãƒƒãƒ—èƒŒæ™¯
    chipBorder: "rgba(0,0,0,0.10)",
    chipText: "#374151",

    radioBg: "#ffffff",          // ä¸¸ã‚¢ã‚¤ã‚³ãƒ³ã®åœ°
    radioActive: "rgba(0,0,0,0.25)", // é¸æŠãƒªãƒ³ã‚°/ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã®ã‚¢ã‚¯ã‚»ãƒ³ãƒˆ

    buttonBg: "#ffffff",         // å°ãƒœã‚¿ãƒ³ï¼ˆÂ±ï¼‰
    buttonBorder: "rgba(0,0,0,0.10)",
    buttonText: "#111827",

    badgeBg: "#ffffff",          // æ•°é‡ãƒãƒƒã‚¸
    badgeText: "#111827",

    sliderTrack: "rgba(0,0,0,0.05)", // ãƒˆãƒ©ãƒƒã‚¯åœ°
    sliderFill: "rgba(0,0,0,0.08)",  // é€²æ—ã®å¡—ã‚Š
    knobStart: "#ffffff",            // ãƒãƒ–ä¸Šã‚°ãƒ©ãƒ‡
    knobEnd: "#e5e7eb",              // ãƒãƒ–ä¸‹ã‚°ãƒ©ãƒ‡

    scrollbarThumb: "rgba(0,0,0,0.10)",
  },
  shadows: {
    sm: "0 1px 1px rgba(0,0,0,0.04)",
    lg: "0 10px 30px rgba(0,0,0,0.06)",
  },
};

/** ãƒ€ãƒ¼ã‚¯ãƒ†ãƒ¼ãƒï¼ˆé››å½¢ï¼‰: å¿…è¦ã«å¿œã˜ã¦å€¤ã‚’èª¿æ•´ã—ã¦ä½¿ã£ã¦ãã ã•ã„ */
export const THEME_DARK: Theme = {
  ...THEME_LIGHT,
  name: "dark",
  colors: {
    ...THEME_LIGHT.colors,
    appBg: "#0b0b0c",
    text: "#f3f4f6",
    textMuted: "#9ca3af",
    surface: "#151517",
    surfaceElevated: "#1b1c1f",
    border: "rgba(255,255,255,0.12)",
    chipBg: "#1f2023",
    chipBorder: "rgba(255,255,255,0.16)",
    radioBg: "#1b1c1f",
    buttonBg: "#1b1c1f",
    badgeBg: "#1b1c1f",
    sliderTrack: "rgba(255,255,255,0.08)",
    sliderFill: "rgba(255,255,255,0.14)",
    knobStart: "#2a2b2f",
    knobEnd: "#1b1c1f",
    scrollbarThumb: "rgba(255,255,255,0.16)",
    radioActive: "rgba(255,255,255,0.35)",
  },
  shadows: {
    sm: "0 1px 1px rgba(0,0,0,0.6)",
    lg: "0 10px 30px rgba(0,0,0,0.55)",
  },
};

/**
 * applyTheme(theme)
 * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 * Theme.colors / shadows ã‚’ CSS å¤‰æ•°ã¸ã‚»ãƒƒãƒˆã—ã¾ã™ã€‚
 * å¤‰æ•°åã¨åˆ©ç”¨å…ˆï¼ˆæŠœç²‹ï¼‰ï¼š
 *   --bg-app         : globals.css body èƒŒæ™¯
 *   --text           : ãƒ™ãƒ¼ã‚¹æ–‡å­—è‰²
 *   --text-muted     : ä¾¡æ ¼/ãƒ©ãƒ™ãƒ«ãªã©è£œåŠ©è‰²
 *   --surface        : .ios-section / .row-card / .btn-round-sm èƒŒæ™¯
 *   --surface-elev   : ç”»åƒãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€/ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼èƒŒæ™¯ã®ã‚°ãƒ©ãƒ‡ä¸‹å´
 *   --border         : é¢/ä¸¸/ãƒœã‚¿ãƒ³ã®æ ç·šã€åŒºåˆ‡ã‚Š .ios-sep
 *   --chip-bg/â€¦      : .ios-chip
 *   --radio-bg       : .btn-radio-icon ã®å†…å´
 *   --accent         : .btn-radio-active ã®ãƒªãƒ³ã‚°ã€.ui-focus ã® focus-outline
 *   --btn-bg/â€¦       : .btn-round-smï¼ˆÂ±ãƒœã‚¿ãƒ³ï¼‰
 *   --badge-bg/â€¦     : æ•°é‡ãƒãƒƒã‚¸ï¼ˆProductCardï¼‰
 *   --slider-*       : SlideToConfirm ã®ãƒˆãƒ©ãƒƒã‚¯/ãƒ•ã‚£ãƒ«/ãƒãƒ–
 *   --scrollbar-thumb: å…¨ä½“ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒãƒ¼
 *   --shadow-sm/lg   : é¢/ãƒœã‚¿ãƒ³ã®å½±
 */
export function applyTheme(theme: Theme) {
  if (typeof document === "undefined") return; // SSR ã§ã¯ä½•ã‚‚ã—ãªã„
  const r = document.documentElement.style;
  const c = theme.colors, s = theme.shadows;

  // ãƒ™ãƒ¼ã‚¹é…è‰²
  r.setProperty("--bg-app", c.appBg);
  r.setProperty("--text", c.text);
  r.setProperty("--text-muted", c.textMuted);

  // é¢ãƒ»å¢ƒç•Œ
  r.setProperty("--surface", c.surface);
  r.setProperty("--surface-elev", c.surfaceElevated);
  r.setProperty("--border", c.border);

  // ãƒãƒƒãƒ—
  r.setProperty("--chip-bg", c.chipBg);
  r.setProperty("--chip-border", c.chipBorder);
  if (c.chipText) r.setProperty("--chip-text", c.chipText);

  // ãƒ©ã‚¸ã‚ªä¸¸ï¼ˆã‚«ãƒ†ã‚´ãƒª/æ”¯æ‰•ã„ï¼‰
  r.setProperty("--radio-bg", c.radioBg);
  r.setProperty("--accent", c.radioActive);

  // å°ãƒœã‚¿ãƒ³ï¼ˆÂ±ï¼‰
  r.setProperty("--btn-bg", c.buttonBg);
  r.setProperty("--btn-border", c.buttonBorder);
  if (c.buttonText) r.setProperty("--btn-text", c.buttonText);

  // æ•°é‡ãƒãƒƒã‚¸
  r.setProperty("--badge-bg", c.badgeBg);
  if (c.badgeText) r.setProperty("--badge-text", c.badgeText);

  // ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼
  r.setProperty("--slider-track", c.sliderTrack);
  r.setProperty("--slider-fill", c.sliderFill);
  r.setProperty("--knob-start", c.knobStart);
  r.setProperty("--knob-end", c.knobEnd);

  // ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒãƒ¼
  r.setProperty("--scrollbar-thumb", c.scrollbarThumb);

  // å½±
  r.setProperty("--shadow-sm", s.sm);
  r.setProperty("--shadow-lg", s.lg);
}
/* === glow theming (categories & payments) === */
export type GlowSpec = { color: string; ringWidthPx?: number; blurPx?: number };

export const GLOW_THEME: {
  category: GlowSpec;
  payments: { default: GlowSpec; byKey: Record<string, GlowSpec> };
} = {
  category: { color: "rgba(56,189,0,.9)", ringWidthPx: 1, blurPx: 12 }, // ã‚«ãƒ†ã‚´ãƒªä¸€æ‹¬
  payments: {
    default: { color: "rgba(56,189,248,.9)", ringWidthPx: 2, blurPx: 12 }, // æ—¢å®š
    byKey: {
       "cash":   { color: "rgba(245,158,11,.95)", blurPx: 16 },
       "card":   { color: "rgba(34,197,94,.95)" },
       "paypay": { color: "rgba(239,68,68,.95)", ringWidthPx: 3 },
    }
  }
};

/** æ”¯æ‰•ã„ã‚¢ã‚¤ã‚³ãƒ³: ã‚­ãƒ¼ã‹ã‚‰è‰²/å¼·ã•ã‚’å‰²å½“ã€‚æœªå®šç¾©ã¯ default */
export function paymentGlow(key: string | undefined): Record<string,string> {
  const k = (key ?? "").toString().trim().toLowerCase();
  const spec = (k && GLOW_THEME.payments.byKey[k]) || GLOW_THEME.payments.default;
  return {
    ["--pay-glow-color" as any]: spec.color,
    ["--pay-glow-width" as any]: (spec.ringWidthPx ?? 2) + "px",
    ["--pay-glow-blur" as any]: (spec.blurPx ?? 12) + "px",
    // btn-radio-icon ã§ --glow-* ã«ã‚‚ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
    ["--glow-color" as any]: spec.color,
    ["--glow-ring-width" as any]: (spec.ringWidthPx ?? 2) + "px",
    ["--glow-blur" as any]: (spec.blurPx ?? 12) + "px",
  };
}

/** ä»»æ„: ã‚«ãƒ†ã‚´ãƒªç”¨å¤‰æ•°ã‚’ :root ã«é©ç”¨ */
export function applyCategoryGlowVars(doc?: Document) {
  const d = doc ?? (typeof document !== "undefined" ? document : undefined);
  if(!d) return;
  const r = d.documentElement;
  r.style.setProperty("--cat-glow-color", GLOW_THEME.category.color);
  r.style.setProperty("--cat-glow-width", (GLOW_THEME.category.ringWidthPx ?? 2) + "px");
  r.style.setProperty("--cat-glow-blur", (GLOW_THEME.category.blurPx ?? 12) + "px");
}
export const QTY_THEME = { activeBg: 'rgba(34,197,94,.16)' };
export const qtyVars = (active?: boolean) => active ? ({ ['--qty-bg' as any]: QTY_THEME.activeBg } as any) : ({} as any);
export const qtyActiveVars = () => ({ ['--qty-bg' as any]: QTY_THEME.activeBg } as any);

````
## styles/globals.css  
- lines: 163 / sha256: 45EF426AB47938961826CDE8C527CA08F0CD94285386FFFF5589E24EED7325E4

````css
@tailwind base;
@tailwind components;
@tailwind utilities;

/* ===== font stacks (è‹±/æ—¥ ä¸€æ‹¬) ===== */
:root{
  --font-en: ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  --font-ja: "Hiragino Kaku Gothic ProN", "Yu Gothic UI", "YuGothic", Meiryo, "Noto Sans JP";

  /* colors (ThemeProvider ãŒä¸Šæ›¸ã) */
  --bg-app: #f5f5f7;
  --text: #111827;
  --text-muted: #6b7280;

  --surface: #ffffff;
  --surface-elev: #f3f4f6;
  --border: rgba(0,0,0,0.08);

  --chip-bg: #f3f4f6;
  --chip-border: rgba(0,0,0,0.10);
  --chip-text: #374151;

  --radio-bg: #ffffff;
  --accent: rgba(0,0,0,0.25);

  --btn-bg: #ffffff;
  --btn-border: rgba(0,0,0,0.10);
  --btn-text: #111827;

  --badge-bg: #ffffff;
  --badge-text: #111827;

  --slider-track: rgba(0,0,0,0.05);
  --slider-fill: rgba(0,0,0,0.08);
  --knob-start: #ffffff;
  --knob-end: #e5e7eb;

  --scrollbar-thumb: rgba(0,0,0,0.10);

  --shadow-sm: 0 1px 1px rgba(0,0,0,0.04);
  --shadow-lg: 0 10px 30px rgba(0,0,0,0.06);
 --qty-bg: rgba(34,197,94,.20);}

html, body, #__next { height: 100%; }
body {
  -webkit-tap-highlight-color: transparent;
  font-family: var(--font-en), var(--font-ja), system-ui, sans-serif;
  background: var(--bg-app);
  color: var(--text);
}

/* ===== tokens (CSS å¤‰æ•°ã«å¯„ã›ã‚‹) ===== */
@layer components {
  .ios-surface {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 16px;
    box-shadow: var(--shadow-sm), var(--shadow-lg);
  }
  .ios-section {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 16px;
    box-shadow: var(--shadow-sm);
  }
  .ios-chip {
    background: var(--chip-bg);
    border: 1px solid var(--chip-border);
    color: var(--chip-text, var(--text-muted));
    border-radius: 9999px;
    padding: 2px 8px;
  }
  .ios-round {
    border-radius: 9999px;
    background: var(--radio-bg);
    border: 1px solid var(--border);
    box-shadow: var(--shadow-sm);
  }
  .ios-sep { border-top: 1px solid var(--border); }

  .ui-tap { transition: transform .1s; }
  .ui-tap:active { transform: scale(.98); }
  .ui-focus:focus{box-shadow:none; outline:0;} .ui-focus:focus{box-shadow:none; outline:0;}

  .btn-round-sm {
    border-radius: 9999px;
    background: var(--btn-bg);
    border: 1px solid var(--btn-border);
    color: var(--btn-text, inherit);
    box-shadow: var(--shadow-sm);
  }

  .btn-radio-icon {
    background: var(--radio-bg);
    border: 1px solid var(--border);
    border-radius: 9999px;
    box-shadow: var(--shadow-sm);
   cursor: pointer;  pointer-events: auto;  position: relative; overflow: visible;}
  .btn-radio-active {
    border-color: var(--accent);
    box-shadow: 0 0 0 2px var(--accent) inset, var(--shadow-sm);
  }

  .btn-radio-label { color: var(--text-muted); }

  .row-card {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 16px;
    box-shadow: var(--shadow-sm);
    text-align: left;
    padding: .5rem;
  }
}

/* scrollbars */
*::-webkit-scrollbar { width: 10px; height: 10px; }
*::-webkit-scrollbar-thumb { background: var(--scrollbar-thumb); border-radius: 9999px; }
*::-webkit-scrollbar-track { background: transparent; }

/* === glow ring (category/payments) === */
.glow-ring{ position:relative; z-index:0; }
.glow-ring::after{
  content:"";
  position:absolute;
  inset: calc(-1 * var(--glow-ring-width,2px));
  border-radius:9999px;
  pointer-events:none;
  z-index:1;
  box-shadow:
    0 0 0 var(--glow-ring-width,2px) var(--glow-color,rgba(56,189,248,.9)),
    0 0 var(--glow-blur,12px) var(--glow-color,rgba(56,189,248,.9));
  animation:ring-glow 1.6s ease-in-out infinite;
}
@keyframes ring-glow{
  0%,100%{
    box-shadow:
      0 0 0 var(--glow-ring-width,2px) var(--glow-color,rgba(56,189,248,.9)),
      0 0 calc(var(--glow-blur,12px)*0.85) var(--glow-color,rgba(56,189,248,.9));
  }
  50%{
    box-shadow:
      0 0 0 var(--glow-ring-width,2px) var(--glow-color,rgba(56,189,248,.9)),
      0 0 calc(var(--glow-blur,12px)*1.2) var(--glow-color,rgba(56,189,248,.9));
  }
}

/* rectangle glow (inherit radius) */
.glow-box{ position: relative; overflow: visible; }
.glow-box::after{
  content:"";
  position:absolute;
  inset: calc(-1 * var(--glow-ring-width,2px));
  border-radius: inherit;
  pointer-events:none;
  box-shadow:
    0 0 0 var(--glow-ring-width,2px) var(--glow-color, rgba(56,189,248,.9)),
    0 0 var(--glow-blur,12px) var(--glow-color, rgba(56,189,248,.9));
  animation: ring-glow 1.6s ease-in-out infinite;
}  
/* qty badge (ProductCard) */
.qty-badge{min-width:22px;height:22px;line-height:22px;text-align:center;border-radius:9999px;border:1px solid var(--border);background:var(--badge-bg);color:var(--badge-text);box-shadow:var(--shadow-sm)}
.qty-badge[data-qty]:not([data-qty="0"]){ background: var(--qty-bg, rgba(34,197,94,.20)); }
````
## tailwind.config.js  
- lines: 10 / sha256: C4E7D9A1DF18C95BF50F7A4BBED470256F5915F3DF816F49C49CC92DF02F32F6

````js
/** @type {import('tailwindcss').Config} */
module.exports = {
  content: [
    "./pages/**/*.{js,ts,jsx,tsx}",
    "./components/**/*.{js,ts,jsx,tsx}",
    "./src/**/*.{js,ts,jsx,tsx}"
  ],
  theme: { extend: {} },
  plugins: [require("twglow")]
};
````
## postcss.config.js  
- lines: 6 / sha256: 70D80474092959D6192FAF6931843AB7C6F4EFEA62C8EC1CA1DFB0305758B960

````js
module.exports = {
  plugins: {
    tailwindcss: {},
    autoprefixer: {}
  }
};
````

